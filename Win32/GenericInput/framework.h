#pragma once

#define WIN32_LEAN_AND_MEAN             // Exclude rarely-used stuff from Windows headers
// Windows Header Files
#include <windows.h>
#include <initguid.h>
#include <Usbiodef.h>
#include <ioapiset.h>
#include <hidsdi.h>
#include <Hidclass.h>
#include <dbt.h>
#include <bluetoothapis.h>
#include <Bthdef.h>
#include <setupapi.h>
#include <Cfgmgr32.h>
#include <vector>
#include <string>
#include <algorithm>
#include <unknwn.h>
#define CONTROLLER_BUTTON_A 0x1000
#define CONTROLLER_BUTTON_B 0x2000
#define CONTROLLER_BUTTON_X 0x4000
#define CONTROLLER_BUTTON_Y 0x8000
#define CONTROLLER_BUTTON_BACK 0x0020
#define CONTROLLER_BUTTON_GUIDE 0x00400
#define CONTROLLER_BUTTON_START 0x0010
#define CONTROLLER_BUTTON_LEFTSTICK 0x0040
#define CONTROLLER_BUTTON_RIGHTSTICK 0x0080
#define CONTROLLER_BUTTON_LEFTSHOULDER 0x0100
#define CONTROLLER_BUTTON_RIGHTSHOULDER 0x0200
#define CONTROLLER_BUTTON_DPAD_UP 0x0001
#define CONTROLLER_BUTTON_DPAD_DOWN 0x0002
#define CONTROLLER_BUTTON_DPAD_LEFT 0x0004
#define CONTROLLER_BUTTON_DPAD_RIGHT 0x0008
#define CONTROLLER_GAMEPAD_GUIDE 0x0400

DEFINE_GUID(GUID_DEVCLASS_XINPUT, 0xec87f1e3, 0xc13b, 0x4100, 0xb5, 0xf7, 0x8b, 0x84, 0xd5, 0x42, 0x60, 0xcb);
//{e0cbf06c-cd8b-4647-bb8a-263b43f0f974}
DEFINE_GUID(GUID_DEVCLASS_BLUETOOTH, 0xE0CBF06C, 0xCD8B, 0x4647, 0xBB, 0x8A, 0x26, 0x3B, 0x43, 0xF0, 0xF9, 0x74);
#include "GenericInputController.h"

typedef struct _GAMEPAD_DATA {//DO NOT MODIFY, DOING SO WILL BREAK THE CONTROLLER DATABASE!
	USHORT VID;
	USHORT PID;
	std::wstring Name;
	BYTE  bLeftTrigger;
	BYTE  bRightTrigger;
	std::wstring TriggerType; // a is analog, b is digital
	SHORT sThumbLX;
	SHORT sThumbLY;
	SHORT sThumbRX;
	SHORT sThumbRY;
	BYTE bButtonA;
	BYTE bButtonB;
	BYTE bButtonX;
	BYTE bButtonY;
	BYTE bButtonBack;
	BYTE bButtonGuide;
	BYTE bButtonStart;
	BYTE bButtonLeftStick;
	BYTE bButtonRightStick;
	BYTE bButtonLeftShoulder;
	BYTE bButtonRightShoulder;
	BYTE bButtonDpadUp;
	BYTE bButtonDpadDown;
	BYTE bButtonDpadLeft;
	BYTE bButtonDpadRight;

} GAMEPAD_DATA, * P_GAMEPAD_DATA;
const SHORT XByteToShort[] = {
-32768,

-32130,-31875,-31620,-31365,
-31110,-30855,-30600,-30345,-30090,-29835,
-29580,-29325,-29070,-28815,-28560,-28305,
-28050,-27795,-27540,-27285,-27030,-26775,
-26520,-26265,-26010,-25755,-25500,-25245,
-24990,-24735,-24480,-24225,-23970,-23715,
-23460,-23205,-22950,-22695,-22440,-22185,
-21930,-21675,-21420,-21165,-20910,-20655,
-20400,-20145,-19890,-19635,-19380,-19125,
-18870,-18615,-18360,-18105,-17850,-17595,
-17340,-17085,-16830,-16575,-16320,-16065,
-15810,-15555,-15300,-15045,-14790,-14535,
-14280,-14025,-13770,-13515,-13260,-13005,
-12750,-12495,-12240,-11985,-11730,-11475,
-11220,-10965,-10710,-10455,-10200,-9945,
-9690,-9435,-9180,-8925,-8670,-8415,
-8160,-7905,-7650,-7395,-7140,-6885,
-6630,-6375,-6120,-5865,-5610,-5355,
-5100,-4845,-4590,-4335,-4080,-3825,
-3570,-3315,-3060,-2805,-2550,-2295,
-2040,-1785,-1530,-1275,-1020,-765,
-510,-255, 0,255,510,765,1020,1275,1530,
1785,2040,2295,2550,2805,3060,
3315,3570,3825,4080,4335,4590,
4845,5100,5355,5610,5865,6120,
6375,6630,6885,7140,7395,7650,
7905,8160,8415,8670,8925,9180,
9435,9690,9945,10200,10455,10710,
10965,11220,11475,11730,11985,12240,
12495,12750,13005,13260,13515,13770,
14025,14280,14535,14790,15045,15300,
15555,15810,16065,16320,16575,16830,
17085,17340,17595,17850,18105,18360,
18615,18870,19125,19380,19635,19890,
20145,20400,20655,20910,21165,21420,
21675,21930,22185,22440,22695,22950,
23205,23460,23715,23970,24225,24480,
24735,24990,25245,25500,25755,26010,
26265,26520,26775,27030,27285,27540,
27795,28050,28305,28560,28815,29070,
29325,29580,29835,30090,30345,30600,
30855,31110,31365,31620,31875,32130,
32386,

32767
};
const SHORT YByteToShort[] = {
32767,

32130,31875,31620,31365,
31110,30855,30600,30345,30090,29835,
29580,29325,29070,28815,28560,28305,
28050,27795,27540,27285,27030,26775,
26520,26265,26010,25755,25500,25245,
24990,24735,24480,24225,23970,23715,
23460,23205,22950,22695,22440,22185,
21930,21675,21420,21165,20910,20655,
20400,20145,19890,19635,19380,19125,
18870,18615,18360,18105,17850,17595,
17340,17085,16830,16575,16320,16065,
15810,15555,15300,15045,14790,14535,
14280,14025,13770,13515,13260,13005,
12750,12495,12240,11985,11730,11475,
11220,10965,10710,10455,10200,9945,
9690,9435,9180,8925,8670,8415,
8160,7905,7650,7395,7140,6885,
6630,6375,6120,5865,5610,5355,
5100,4845,4590,4335,4080,3825,
3570,3315,3060,2805,2550,2295,
2040,1785,1530,1275,1020,765,
510,255, 0,-255,-510,-765,-1020,-1275,-1530,
-1785,-2040,-2295,-2550,-2805,-3060,
-3315,-3570,-3825,-4080,-4335,-4590,
-4845,-5100,-5355,-5610,-5865,-6120,
-6375,-6630,-6885,-7140,-7395,-7650,
-7905,-8160,-8415,-8670,-8925,-9180,
-9435,-9690,-9945,-10200,-10455,-10710,
-10965,-11220,-11475,-11730,-11985,-12240,
-12495,-12750,-13005,-13260,-13515,-13770,
-14025,-14280,-14535,-14790,-15045,-15300,
-15555,-15810,-16065,-16320,-16575,-16830,
-17085,-17340,-17595,-17850,-18105,-18360,
-18615,-18870,-19125,-19380,-19635,-19890,
-20145,-20400,-20655,-20910,-21165,-21420,
-21675,-21930,-22185,-22440,-22695,-22950,
-23205,-23460,-23715,-23970,-24225,-24480,
-24735,-24990,-25245,-25500,-25755,-26010,
-26265,-26520,-26775,-27030,-27285,-27540,
-27795,-28050,-28305,-28560,-28815,-29070,
-29325,-29580,-29835,-30090,-30345,-30600,
-30855,-31110,-31365,-31620,-31875,-32130,
-32386,
-32768
};
const SHORT XByteToShortAlt[] = {
-32768,

-32130,-31875,-31620,-31365,
-31110,-30855,-30600,-30345,-30090,-29835,
-29580,-29325,-29070,-28815,-28560,-28305,
-28050,-27795,-27540,-27285,-27030,-26775,
-26520,-26265,-26010,-25755,-25500,-25245,
-24990,-24735,-24480,-24225,-23970,-23715,
-23460,-23205,-22950,-22695,-22440,-22185,
-21930,-21675,-21420,-21165,-20910,-20655,
-20400,-20145,-19890,-19635,-19380,-19125,
-18870,-18615,-18360,-18105,-17850,-17595,
-17340,-17085,-16830,-16575,-16320,-16065,
-15810,-15555,-15300,-15045,-14790,-14535,
-14280,-14025,-13770,-13515,-13260,-13005,
-12750,-12495,-12240,-11985,-11730,-11475,
-11220,-10965,-10710,-10455,-10200,-9945,
-9690,-9435,-9180,-8925,-8670,-8415,
-8160,-7905,-7650,-7395,-7140,-6885,
-6630,-6375,-6120,-5865,-5610,-5355,
-5100,-4845,-4590,-4335,-4080,-3825,
-3570,-3315,-3060,-2805,-2550,-2295,
-2040,-1785,-1530,-1275,-1020,-765,
-510,-255, 0,255,510,765,1020,1275,1530,
1785,2040,2295,2550,2805,3060,
3315,3570,3825,4080,4335,4590,
4845,5100,5355,5610,5865,6120,
6375,6630,6885,7140,7395,7650,
7905,8160,8415,8670,8925,9180,
9435,9690,9945,10200,10455,10710,
10965,11220,11475,11730,11985,12240,
12495,12750,13005,13260,13515,13770,
14025,14280,14535,14790,15045,15300,
15555,15810,16065,16320,16575,16830,
17085,17340,17595,17850,18105,18360,
18615,18870,19125,19380,19635,19890,
20145,20400,20655,20910,21165,21420,
21675,21930,22185,22440,22695,22950,
23205,23460,23715,23970,24225,24480,
24735,24990,25245,25500,25755,26010,
26265,26520,26775,27030,27285,27540,
27795,28050,28305,28560,28815,29070,
29325,29580,29835,30090,30345,30600,
30855,31110,31365,31620,31875,32130,
32386,

32767
};
const SHORT YByteToShortAlt[] = {
32767,

32130,31875,31620,31365,
31110,30855,30600,30345,30090,29835,
29580,29325,29070,28815,28560,28305,
28050,27795,27540,27285,27030,26775,
26520,26265,26010,25755,25500,25245,
24990,24735,24480,24225,23970,23715,
23460,23205,22950,22695,22440,22185,
21930,21675,21420,21165,20910,20655,
20400,20145,19890,19635,19380,19125,
18870,18615,18360,18105,17850,17595,
17340,17085,16830,16575,16320,16065,
15810,15555,15300,15045,14790,14535,
14280,14025,13770,13515,13260,13005,
12750,12495,12240,11985,11730,11475,
11220,10965,10710,10455,10200,9945,
9690,9435,9180,8925,8670,8415,
8160,7905,7650,7395,7140,6885,
6630,6375,6120,5865,5610,5355,
5100,4845,4590,4335,4080,3825,
3570,3315,3060,2805,2550,2295,
2040,1785,1530,1275,1020,765,
510,255, 0,-255,-510,-765,-1020,-1275,-1530,
-1785,-2040,-2295,-2550,-2805,-3060,
-3315,-3570,-3825,-4080,-4335,-4590,
-4845,-5100,-5355,-5610,-5865,-6120,
-6375,-6630,-6885,-7140,-7395,-7650,
-7905,-8160,-8415,-8670,-8925,-9180,
-9435,-9690,-9945,-10200,-10455,-10710,
-10965,-11220,-11475,-11730,-11985,-12240,
-12495,-12750,-13005,-13260,-13515,-13770,
-14025,-14280,-14535,-14790,-15045,-15300,
-15555,-15810,-16065,-16320,-16575,-16830,
-17085,-17340,-17595,-17850,-18105,-18360,
-18615,-18870,-19125,-19380,-19635,-19890,
-20145,-20400,-20655,-20910,-21165,-21420,
-21675,-21930,-22185,-22440,-22695,-22950,
-23205,-23460,-23715,-23970,-24225,-24480,
-24735,-24990,-25245,-25500,-25755,-26010,
-26265,-26520,-26775,-27030,-27285,-27540,
-27795,-28050,-28305,-28560,-28815,-29070,
-29325,-29580,-29835,-30090,-30345,-30600,
-30855,-31110,-31365,-31620,-31875,-32130,
-32386,
-32768
};